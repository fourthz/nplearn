<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Fisher-Irwin Test • nplearn</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Fisher-Irwin Test">
<meta property="og:description" content="nplearn">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nplearn</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9020</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Bernoulli-Events.html">Bernoulli Events</a>
    </li>
    <li>
      <a href="../articles/binomdist.html">The Binomial Distribution</a>
    </li>
    <li>
      <a href="../articles/FisherIrwin.html">The Fisher-Irwin Test</a>
    </li>
    <li>
      <a href="../articles/gof.html">Goodness of Fit</a>
    </li>
    <li>
      <a href="../articles/ksamp.html">K-Sample Methods for Quantitative Data</a>
    </li>
    <li>
      <a href="../articles/lsprop.html">Large-Sample Proportion Inference</a>
    </li>
    <li>
      <a href="../articles/OnePropExact.html">Exact Inference for a Single Proportion</a>
    </li>
    <li>
      <a href="../articles/ProdBinom.html">The Product Binomial</a>
    </li>
    <li>
      <a href="../articles/randomization.html">Randomization Tests</a>
    </li>
    <li>
      <a href="../articles/releffic.html">Relative Efficiency</a>
    </li>
    <li>
      <a href="../articles/ReplaceScores.html">Replacement Scores</a>
    </li>
    <li>
      <a href="../articles/signtest.html">The Sign Test</a>
    </li>
    <li>
      <a href="../articles/twosamp.html">Two Sample Procedures</a>
    </li>
    <li>
      <a href="../articles/Workflow-Sample.html">Workflow Sample</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Fisher-Irwin Test</h1>
            
      
      
      <div class="hidden name"><code>FisherIrwin.Rmd</code></div>

    </div>

    
    
<p>When we have two independent samples and a dichotomous response
variable, our interest is in the probability of a joint event in which
there are some number of successes in one sample and some number of
successes in the other sample. Other than the sample size, there is no
restriction on how many successes can occur in each sample. In some
situations, however, the total number of successes is known in advance.
In that case, the number of successes in our two conditions are
dependent on one another. Knowing the number of successes in one
condition will tell us the number in the other condition. In this
vignette, we turn our attention to analyzing data when the number of
successes is known prior to the start of the study.</p>
<div class="section level3">
<h3 id="required-packages">Required packages<a class="anchor" aria-label="anchor" href="#required-packages"></a>
</h3>
<p>The packages required for this vignette are nplearn and MASS. Make
certain that you have installed these packages before attempting to load
the libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fourthz.github.io/nplearn" class="external-link">nplearn</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-hypergeometric-distribution">The hypergeometric distribution<a class="anchor" aria-label="anchor" href="#the-hypergeometric-distribution"></a>
</h3>
<p>In the <em>product binomial</em> vignette, we analyzed data obtained
from two samples created by randomizing 20 band students to morning and
afternoon tryouts for the all-state band. Let’s again consider this
scenario, but this time suppose that these students all come from one
school. The all-state band committee has indicated how many students can
be accepted from each school, based on school size. For this school,
only five slots can be filled by band members from the school.</p>
<p>Here are the (hypothetical) data.</p>
<div class="figure">
<img src="FisherIrwin%20Band%20Results.jpg" alt=""><p class="caption"><em>Figure 1</em></p>
</div>
<p>As in the previous example, 20 students were randomly assigned to
morning and afternoon tryout conditions. The difference this time is
that we know before the tryouts even begin that there will be 5
successes. Notice that with this knowledge we can fill in every margin
in our table before we ever collect the data. This is clearly not a
product binomial problem because the number of possible successes do not
vary from 0 to 10 for each condition. The highest number of successes
that can occur in a condition is 5. Further, the number of successes
that can occur in the other condition is directly related to how many
there are in the first condition so that the numbers of successes must
sum to 5.</p>
<p>We can conceive of the possibilities by focusing on just one cell in
this four cell crossbreak table. Let’s focus on the upper left cell
(morning successes). This can range from 0 to 5 successes. Notice that
whatever value we set this cell to be in that range, the entire table
can be completed. We already know that we cannot calculate the
probability of this table with the product binomial formula, so what do
we do?</p>
<p>The answer is that under the null hypothesis of equal proportions of
successes in both morning and afternoon conditions, the probability of a
particular value of <span class="math inline">\(\hat{\delta}\)</span> is
given by the hypergeometric formula. We can use a function in R to make
this calculation. For example, for our oberved data in Figure 1, here is
the probability calculation.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Hypergeometric.html" class="external-link">dhyper</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1354489</span></span></code></pre></div>
<p>The entry of values is for obtaining the probability of randomly
selecting 4 morning students out of 10 morning students when we also
have 10 afternoon students and there will be 5 slots to fill.</p>
<p>Realizing that number of morning successes can only range from 0 to
5, and also knowing that the remainder of the success will be in the
afternoon, we can create the entire probability distribution.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">morning.success</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="va">afternoon.success</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="op">-</span> <span class="va">morning.success</span></span>
<span><span class="va">delta.hat</span> <span class="op">&lt;-</span> <span class="va">morning.success</span><span class="op">/</span><span class="fl">10</span> <span class="op">-</span> <span class="va">afternoon.success</span><span class="op">/</span><span class="fl">10</span></span>
<span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Hypergeometric.html" class="external-link">dhyper</a></span><span class="op">(</span><span class="va">morning.success</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">morning.success</span>, <span class="va">afternoon.success</span>, <span class="va">delta.hat</span>, <span class="va">prob</span><span class="op">)</span></span>
<span><span class="co">#&gt;      morning.success afternoon.success delta.hat       prob</span></span>
<span><span class="co">#&gt; [1,]               0                 5      -0.5 0.01625387</span></span>
<span><span class="co">#&gt; [2,]               1                 4      -0.3 0.13544892</span></span>
<span><span class="co">#&gt; [3,]               2                 3      -0.1 0.34829721</span></span>
<span><span class="co">#&gt; [4,]               3                 2       0.1 0.34829721</span></span>
<span><span class="co">#&gt; [5,]               4                 1       0.3 0.13544892</span></span>
<span><span class="co">#&gt; [6,]               5                 0       0.5 0.01625387</span></span></code></pre></div>
<p>Here’s a check that these probabilities sum to 1.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>Suppose we are looking for judging bias in either direction
(i.e. favoring either the morning or afternoon). Then we need to obtain
our <em>p</em> value we need to add up all the probabilities for
absolute values of <span class="math inline">\(\hat{\delta}\)</span>
that are at least as great as our observed value of 0.3.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">prob</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">delta.hat</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">0.3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.3034056</span></span></code></pre></div>
<p>Clearly this is insufficient evidence to make claims of judging bias.
If we had set out to study whether there is bias in favor of morning
sessions, we would have just looked at one side of the distribution.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">prob</span><span class="op">[</span><span class="va">delta.hat</span> <span class="op">&gt;=</span> <span class="fl">0.3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1517028</span></span></code></pre></div>
<p>This still is probably not enough evidence for us to make bias
accusations, even though we did find that 40% of the morning students
and only 10% of the afternoon students were selected. The sample size is
simply not large enough for us to claim bias, even with this estimate of
time-of-day effect.</p>
</div>
<div class="section level3">
<h3 id="a-test-for-median-equality">A test for median equality<a class="anchor" aria-label="anchor" href="#a-test-for-median-equality"></a>
</h3>
<p>When the response variable for a single sample yields quantitative
data, we can use the sign test as a test of a hypothesis about the
median. Similarly, the Fisher-Irwin test can be used as a test of a
hypothesis about the equality of two medians.</p>
<p>To exemplify this method, consider an example in which an independent
evaluation firm interviews employees at 12 companies and then, based on
the results of the interview, gives each company an “employee
satisfaction score.” Some of these companies have put an employee
feedback system (EFS) in place as a means for employees to communicate
concerns to management. The primary question is whether companies with
such systems have higher satisfaction scores than those without such
systems. We can view these companies as representing a larger population
of companies, some of which have EFS and some which do not. Our interest
is in whether the median satisfaction score is greater for companies
with feedback systems than for companies that have not implemented such
a system. Let’s input the scores for this hypothetical example.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">efs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">10</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">no.efs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>Here are the null and alternative hypotheses.</p>
<p><span class="math inline">\(H_0: \theta_{efs} = \theta_{no \:
efs}\)</span></p>
<p><span class="math inline">\(H_a: \theta_{efs} &gt; \theta_{no \:
efs}\)</span></p>
<p>If the null hypothesis is true, the two types of companies share the
same median, so to estimate this common median we can combine all
scores.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all.companies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">efs</span>, <span class="va">no.efs</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">all.companies</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7.5</span></span></code></pre></div>
<p>Let us now look at how many companies are above the median in each of
the two conditions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">efs</span> <span class="op">&gt;</span> <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">no.efs</span> <span class="op">&gt;</span> <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>With this information in hand, we can construct the following
table.</p>
<div class="figure">
<img src="efs%20example.jpg" alt=""><p class="caption"><em>Figure 2</em></p>
</div>
<p>As with the previous Fisher-Irwin example, all margin totals are
known before the interviews are conducted and the companies are scored.
We know which of the the companies have EFS in place, so the two sample
sizes are known. The fact that we have hypothesized a common median
tells us that half of the companies will be above the median and half
will be below the median, so this margin is known as well. We can think
of being above the median as a “success” and being below as a “failure,”
so this is the same type of situation as we had in the Fisher-Irwin
example, so we can use the hypergeometric distribution.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">efs.above</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span><span class="va">no.efs.above</span> <span class="op">&lt;-</span> <span class="fl">6</span> <span class="op">-</span> <span class="va">efs.above</span></span>
<span><span class="va">delta.hat</span> <span class="op">&lt;-</span> <span class="va">efs.above</span><span class="op">/</span><span class="fl">7</span> <span class="op">-</span> <span class="va">no.efs.above</span><span class="op">/</span><span class="fl">5</span></span>
<span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Hypergeometric.html" class="external-link">dhyper</a></span><span class="op">(</span><span class="va">efs.above</span>, <span class="fl">7</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">efs.above</span>, <span class="va">no.efs.above</span>, <span class="va">delta.hat</span>, <span class="va">prob</span><span class="op">)</span></span>
<span><span class="co">#&gt;      efs.above no.efs.above  delta.hat        prob</span></span>
<span><span class="co">#&gt; [1,]         1            5 -0.8571429 0.007575758</span></span>
<span><span class="co">#&gt; [2,]         2            4 -0.5142857 0.113636364</span></span>
<span><span class="co">#&gt; [3,]         3            3 -0.1714286 0.378787879</span></span>
<span><span class="co">#&gt; [4,]         4            2  0.1714286 0.378787879</span></span>
<span><span class="co">#&gt; [5,]         5            1  0.5142857 0.113636364</span></span>
<span><span class="co">#&gt; [6,]         6            0  0.8571429 0.007575758</span></span></code></pre></div>
<p>This is a one-sided test, so we can see that for the observed
difference in proportions of 0.86, the <em>p</em> value is 0.0076. We
can declare that EFS makes a difference in employee satisfaction, though
there is a caveat: the data are from an observational study, rather than
from an experiment. Extraneous variables may be responsible for the
satisfaction differences. For example, suppose that the same companies
that care enough about employee opinion to solicit feedback are also the
companies that care enough to implement other employee-focused
initiatives, such as break facility improvements or bonus incentives.
These may be responsible for the difference, rather than the EFS.</p>
<p>Instead of looking at the full distribution, we can use a function
that is available in R.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">efs.table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>                    nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                    byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/fisher.test.html" class="external-link">fisher.test</a></span><span class="op">(</span><span class="va">efs.table</span>, alternative <span class="op">=</span> <span class="st">"greater"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Fisher's Exact Test for Count Data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  efs.table</span></span>
<span><span class="co">#&gt; p-value = 0.007576</span></span>
<span><span class="co">#&gt; alternative hypothesis: true odds ratio is greater than 1</span></span>
<span><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span><span class="co">#&gt;  2.4008    Inf</span></span>
<span><span class="co">#&gt; sample estimates:</span></span>
<span><span class="co">#&gt; odds ratio </span></span>
<span><span class="co">#&gt;        Inf</span></span></code></pre></div>
<p>We observe that the <em>p</em> value matches what we calculated
earlier. We also notice a confidence interval for the “odds ratio,” so
now would be a good time to learn about this statistic.</p>
</div>
<div class="section level3">
<h3 id="the-odds-ratio">The odds ratio<a class="anchor" aria-label="anchor" href="#the-odds-ratio"></a>
</h3>
<p>In the previous example, the estimated proportion of EFS companies
that are above the median company satisfaction score is 6/7, or 0.86.
For the non-EFS companies it is 0/5, or 0. The odds of a specified
outcome is the ratio of the expected frequency of that outcome to that
of another outcome. In the current example, this would be the expected
frequency of a company being above the median to that of being below the
median. Obviously we don’t know this expected frequency. It is a
population value. What we do know, however are the observed frequencies,
so we can use these to estimate the population values.</p>
<p>The odds of an EFS company being above the median are estimated to be
6 to 1, because 6 companies are above the median and 1 is below. If we
consider this as a ratio, this is 6/1, or 6. This means that there is a
six times greater chance for an EFS company being above the median than
below the median.</p>
<p>Estimating the odds for a non-EFS company gives us a peculiar result:
It is 0 to 5, or 0/5, or 0. Stating that there is a “0 times greater
chance” of being above the median than below the median is likely due to
the small sample size. We would assume that with a larger number of
companies, we would find some of them above the median satisfaction
score, even if they had not implemented a feedback system.</p>
<p>The ratio of the odds, better known as the <em>odds ratio</em> is
quite simply a ratio of these two odds. In the current example, we have
(6/1)/(0/5). Again, we get a peculiar result due to the small sample
size: 6/0. Dividing a number by 0 gives us an infinite result, which is
why the odds ratio reported by the function above is listed as “inf”.
Even with this peculiar result, the confidence interval for the odds
ratio was calculated as 2.4 to infinity. This means we are 95% confident
that for the population of companies, implementation of an EFS makes it
between 2.4 times to “infinite times” more likely to result in a
satisfaction score that is above the median satisfaction score of all
companies.</p>
<p>Let’s do this again with the band data so that we can see an example
without the peculiarity of having “infinite” in our results. Remember
that this was a two-sided test because we were looking for judging bias
in either direction.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">morning.odds</span> <span class="op">&lt;-</span> <span class="fl">4</span><span class="op">/</span><span class="fl">6</span></span>
<span><span class="va">afternoon.odds</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">9</span></span>
<span><span class="va">odds.ratio</span> <span class="op">&lt;-</span> <span class="va">morning.odds</span><span class="op">/</span><span class="va">afternoon.odds</span></span>
<span><span class="va">odds.ratio</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>This tells us that based on our observed data, we estimate that the
chance of being selected for the all-state band is 6 times greater if
you are judged in the morning than if you are judged in the afternoon.
This is substantial, but remember that with the small sample size, this
was not enough evidence to conclude that this is judging bias. Let’s
look at it with the R function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">band.table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>                     nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                     byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/fisher.test.html" class="external-link">fisher.test</a></span><span class="op">(</span><span class="va">band.table</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Fisher's Exact Test for Count Data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  band.table</span></span>
<span><span class="co">#&gt; p-value = 0.3034</span></span>
<span><span class="co">#&gt; alternative hypothesis: true odds ratio is not equal to 1</span></span>
<span><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span><span class="co">#&gt;    0.4075889 326.8267297</span></span>
<span><span class="co">#&gt; sample estimates:</span></span>
<span><span class="co">#&gt; odds ratio </span></span>
<span><span class="co">#&gt;   5.485861</span></span></code></pre></div>
<p>You may notice that the estimate of the odds ratio, about 5.5, is
different than the odds ratio that we obtained of 6. Why? The sample
odds ratio (our simple calculation above) can be calculated regardless
of the number of marginal values that are fixed. That is, it does not
“know” that we specified that there are only 5 slots available for the
all-state band. If the judges changed it to be 6 slots, we would still
get the same estimate (6) of the odds ratio. Yet how can this be? If
there are fewer slots, the odds should change! The way to deal with this
is to calculate an odds ratio that is conditioned on our fixed margins.
Showing how to do this “by hand” is beyond what were we are going to go,
but that’s OK because the R function is doing exactly that for us. The
estimate it reports is actually a better estimate than the simple one we
calculated above, so we just need to focus on interpretation. The chance
of success in a morning slot is about 5.5 times the chance of success in
an afternoon slot.</p>
<p>Look at the confidence interval. It ranges from saying that the
chance of success in the morning is less than half the chance of success
in the afternoon all the way to the chance in the morning being 327
times the chance of success in the afternoon! This huge interval is
consistent with our large <em>p</em> value. Clearly we could benefit
from a larger sample.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Seaman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
